function initMap() { var e = { lat: 45.5087, lng: -73.554 }; new google.maps.Map(document.getElementById("map"), { zoom: 10, center: e }) } function initMapTest(e) { var t = routes.filter(getRouteById(e)), a = t[0].geometry.coordinates, r = new google.maps.Map(document.getElementById("map"), { center: { lat: a[0][1], lng: a[0][0] }, zoom: 14 }); for (i = 0; i < a.length; i++) marker = new google.maps.Marker({ position: new google.maps.LatLng(a[i][1], a[i][0]), map: r }) } function bindRouteFilter() { var e = new Object; return e.WayType = $("input[name=optWayType]:checked").val(), e.SpecialWayType = $("input[name=optSpecWayType]:checked").val(), void 0 == e.SpecialWayType && (e.SpecialWayType = 0), e.RouteLength = $("#routeLength").val(), void 0 == e.RouteLength && (e.RouteLength = 0), e.NumberLane = $("input[name=optNumberLane]:checked").val(), e.Separator = $("input[name=optSeparator]:checked").val(), void 0 == e.Separator && (e.Separator = null), e.AllSeason = $("input[name=optAllSeason]:checked").val(), console.log(e), e } function getFilteredRoutes(e) { return function (t) { return t.properties.TYPE_VOIE == e.WayType && t.properties.TYPE_VOIE2 == e.SpecialWayType && t.properties.NBR_VOIE == e.NumberLane && t.properties.SEPARATEUR == e.Separator && t.properties.SAISONS4 == e.AllSeason } } function getRouteById(e) { return function (t) { return t.properties.ID == e } } function bindDataTable(e) { for (var t = new Array, a = 0; a < e.length; a++) { var r = new Array; r.push(e[a].properties.ID, e[a].properties.LONGUEUR, e[a].properties.NOM_ARR_VI), t.push(r) } JSON.stringify(t); $("#resultTable").DataTable({ searching: !1, destroy: !0, data: t, columns: [{ title: "Id" }, { title: "Longueur" }, { title: "Nome arrive" }], columnDefs: [{ targets: [0], visible: !1 }] }), $("#resultTable tbody").on("click", "tr", function () { var e = $("#resultTable").DataTable(); $(this).hasClass("selected") ? $(this).removeClass("selected") : (e.$("tr.selected").removeClass("selected"), $(this).addClass("selected")); var t = e.row(this).data(); initMapTest(t[0]) }) } var routes = getBicycleRoutes(); $(document).ready(function () { $("#chooseRoutes").submit(function (e) { try { var t = routes.filter(getFilteredRoutes(bindRouteFilter())); bindDataTable(t) } catch (a) { console.log(a) } e.preventDefault() }) });